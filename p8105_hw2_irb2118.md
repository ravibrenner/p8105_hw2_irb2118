P8105 - HW2
================
Due: 2024-10-02

Author: Ravi Brenner (irb2118)

# Introduction

This Rmarkdown document is for P8105 - Data Science 1, homework 2.

# Methods

The data for this homework comes from the course website, but all files
can be found in the `data/` folder. Additionally, we will be using
packages from the `tidyverse`

``` r
library(tidyverse)
```

# Problems

## Problem 1

This problem is about the NYC subway system.

First, we must read in the data, clean up the column names, and select
and transform the columns that we need:

``` r
subway_df <-
  read_csv("data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") |>
  janitor::clean_names() |>
  select(
    line,
    station_name,
    station_latitude,
    station_longitude,
    route1:route11,
    entry,
    vending,
    entrance_type,
    ada
  ) |>
  mutate(entry = case_match(entry,
                            "YES" ~ TRUE,
                            "NO" ~ FALSE),
         across(.cols = route8:route11,
                as.character))
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

This dataset contains data on each subway line and station (name and
geographic location), and the routes that operate at the line and
station (for example, some stops accomodate multiple trains on the same
line, like the NQRW or the 123). There are additional variables
indicating the entrance type, presence of vending machines, and ADA
compliance.

So far, I imported the data using `read_csv`, cleaned up the column
names using `janitor::clean_names`, selected the relevant columns using
`select`, and transformed the `entry` column from character to logical.
I also changed routes 8-11 to characters, since some subway lines are
lettered rather than numbered. After these steps, there are 1868 rows
and 19 columns.

As of right now, these data are not tidy, because the routes at each
station are indicated as seperate variables, rather than as observations
withing a “routes” variable. We can fix that using `pivot_longer`:

``` r
subway_df |>
  pivot_longer(cols = route1:route11,
               names_to = "route_number",
               values_to = "route_name",
               names_prefix = "route") |>
  drop_na(route_name)
```

    ## # A tibble: 4,270 × 10
    ##    line     station_name station_latitude station_longitude entry vending
    ##    <chr>    <chr>                   <dbl>             <dbl> <lgl> <chr>  
    ##  1 4 Avenue 25th St                  40.7             -74.0 TRUE  YES    
    ##  2 4 Avenue 25th St                  40.7             -74.0 TRUE  YES    
    ##  3 4 Avenue 36th St                  40.7             -74.0 TRUE  YES    
    ##  4 4 Avenue 36th St                  40.7             -74.0 TRUE  YES    
    ##  5 4 Avenue 36th St                  40.7             -74.0 TRUE  YES    
    ##  6 4 Avenue 36th St                  40.7             -74.0 TRUE  YES    
    ##  7 4 Avenue 36th St                  40.7             -74.0 TRUE  YES    
    ##  8 4 Avenue 36th St                  40.7             -74.0 TRUE  YES    
    ##  9 4 Avenue 45th St                  40.6             -74.0 TRUE  YES    
    ## 10 4 Avenue 45th St                  40.6             -74.0 TRUE  YES    
    ## # ℹ 4,260 more rows
    ## # ℹ 4 more variables: entrance_type <chr>, ada <lgl>, route_number <chr>,
    ## #   route_name <chr>

Write a short paragraph about this dataset – explain briefly what
variables the dataset contains, describe your data cleaning steps so
far, and give the dimension (rows x columns) of the resulting dataset.
Are these data tidy?

Answer the following questions using these data:

How many distinct stations are there? Note that stations are identified
both by name and by line (e.g. 125th St 8th Avenue; 125st Broadway;
125st Lenox); the distinct function may be useful here. How many
stations are ADA compliant? What proportion of station entrances / exits
without vending allow entrance? Reformat data so that route number and
route name are distinct variables. How many distinct stations serve the
A train? Of the stations that serve the A train, how many are ADA
compliant?

## Problem 2

## Problem 3

# Conclusion
